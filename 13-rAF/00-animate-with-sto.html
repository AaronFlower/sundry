<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Animatie with settimeout</title>
	<style>
		body {
			margin: auto;
			width: 60%;
		}
		.circle {
			width: 60px;
			height: 60px;
			border-radius: 50%;
			background: green;
			position: absolute;
		}
		/**
		 * last-child è¿˜è¦æ‰¾ä¸€ä¸ªçˆ¶å®¹å™¨ï¼Œ body ä¸èƒ½å½“ä½œä½ å®¹å™¨ï¼Œæ‰€ä»¥è¿˜åŠ ä¸€ä¸ª container.
		 * @type {[type]}
		 */
		.circle:last-child {
			top: 70px;
			background: blue;
		}
	</style>
</head>
<body>
	<div class="contianer" style="height: 130px;">
		<div class="circle">
		</div>
		<div class="circle">
		</div>
	</div>
	<button id="stop">Stop</button>
	<p>
		é¡µé¢åˆšä¸€åŠ è½½å°±ä¼šæ‰§è¡Œä¸¤ä¸ªåŠ¨ç”»ã€‚ç„¶åæœ€å°åŒ–æµè§ˆå™¨ï¼Œç„¶åå†æ‰“å¼€æµè§ˆå™¨å•å‡» Stop æŒ‰é’®æŸ¥çœ‹ consoleï¼Œ ä¼šå‘ç°æµè§ˆå™¨åœ¨æœ€å°åŒ–çš„æ—¶å€™ requestAnimationFrame ä¼šåœæ­¢è¿è¡Œã€‚
		æ‰€ä»¥æ›´ çœç”µğŸ˜‚ã€‚
	</p>
	<script>
		let $circles = document.querySelectorAll('.circle')
		let lefts = [0, 0]
		let goOn = true
		function animateCircle () {
			$circles[0].style.left = (lefts[0] += 5) + 'px'
			if (lefts[0] > 1024) {
				lefts[0] = 0
			}
			console.log('lefts[0]: ', lefts[0])
			goOn && setTimeout(function () {
				animateCircle()
			}, 1000/60)
		}

		function animateCircle2 () {
			$circles[1].style.left = (lefts[1] += 5) + 'px'
			if (lefts[1] > 1024) {
				lefts[1] = 0
			}
			console.error('lefts[1]: ', lefts[1])
			goOn && requestAnimationFrame(animateCircle2)
		}
		animateCircle()
		animateCircle2()

		document.getElementById('stop').addEventListener('click', function () {
			goOn = false
		})
	</script>
</body>
</html>